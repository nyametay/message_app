{% extends "base.html" %}

{% block content %}
<div class="max-w-3xl mx-auto mt-10">

  <h2 class="text-3xl font-bold mb-6 text-purple-700 dark:text-purple-400">Settings</h2>

  <!-- Email Section -->
  <div class="bg-white dark:bg-gray-800 shadow rounded-lg p-6 mb-6 flex items-center justify-between">
    <div>
      <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200">Email</h3>
      <p class="text-sm text-gray-500 dark:text-gray-400">{{ user.email }}</p>
    </div>
    <button data-modal-target="email-modal"
            class="px-4 py-2 bg-purple-700 text-white rounded hover:bg-purple-800 dark:bg-purple-600 dark:hover:bg-purple-500">
      Update
    </button>
  </div>

  <!-- Password Section -->
  <div class="bg-white dark:bg-gray-800 shadow rounded-lg p-6 mb-6 flex items-center justify-between">
    <div>
      <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200">Password</h3>
      <p class="text-sm text-gray-500 dark:text-gray-400">********</p>
    </div>
    <button data-modal-target="password-modal"
            class="px-4 py-2 bg-purple-700 text-white rounded hover:bg-purple-800 dark:bg-purple-600 dark:hover:bg-purple-500">
      Change
    </button>
  </div>

  <!-- Theme Preference -->
  <!-- Theme Preference -->
    <div class="bg-white dark:bg-gray-800 shadow rounded-lg p-6 mb-6 flex items-center justify-between">
      <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200">Appearance</h3>

      <!-- Toggle Switch -->
      <label class="relative inline-flex items-center cursor-pointer">
        <input type="checkbox" id="theme-switch" class="sr-only peer">
        <div class="w-14 h-8 bg-gray-300 peer-focus:outline-none rounded-full peer dark:bg-gray-600
                    peer-checked:bg-purple-700 dark:peer-checked:bg-purple-500 transition"></div>
        <div class="absolute left-1 top-1 w-6 h-6 bg-white rounded-full transition-transform
                    peer-checked:translate-x-6"></div>
      </label>
    </div>
</div>


<!-- Email Modal -->
<div id="email-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
  <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg w-full max-w-md p-6">
    <h3 class="text-xl font-semibold mb-4 text-gray-700 dark:text-gray-200">Update Email</h3>
    <form method="POST" action="{{ url_for('update_email') }}" class="space-y-4">
      <div>
        <label class="block text-sm text-gray-600 dark:text-gray-300">New Email</label>
        <input type="email" name="email" value="{{ user.email }}"
               class="w-full px-4 py-2 border rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-gray-200">
      </div>
      <div>
        <label class="block text-sm text-gray-600 dark:text-gray-300">Password</label>
        <input type="password" name="password"
               class="w-full px-4 py-2 border rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-gray-200">
      </div>
      <div class="flex justify-end gap-2">
        <button type="button" data-close-modal="email-modal"
                class="px-4 py-2 bg-gray-200 dark:bg-gray-600 rounded hover:bg-gray-300 dark:hover:bg-gray-500">
          Cancel
        </button>
        <button type="submit"
                class="px-4 py-2 bg-purple-700 text-white rounded hover:bg-purple-800 dark:bg-purple-600 dark:hover:bg-purple-500">
          Save
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Password Modal -->
<div id="password-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
  <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg w-full max-w-md p-6">
    <h3 class="text-xl font-semibold mb-4 text-gray-700 dark:text-gray-200">Change Password</h3>
    <form method="POST" action="{{ url_for('update_password') }}" class="space-y-4">
      <div>
        <label class="block text-sm text-gray-600 dark:text-gray-300">Current Password</label>
        <input type="password" name="current_password"
               class="w-full px-4 py-2 border rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-gray-200">
      </div>
      <div>
        <label class="block text-sm text-gray-600 dark:text-gray-300">New Password</label>
        <input type="password" name="new_password"
               class="w-full px-4 py-2 border rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-gray-200">
      </div>
      <div class="flex justify-end gap-2">
        <button type="button" data-close-modal="password-modal"
                class="px-4 py-2 bg-gray-200 dark:bg-gray-600 rounded hover:bg-gray-300 dark:hover:bg-gray-500">
          Cancel
        </button>
        <button type="submit"
                class="px-4 py-2 bg-purple-700 text-white rounded hover:bg-purple-800 dark:bg-purple-600 dark:hover:bg-purple-500">
          Save
        </button>
      </div>
    </form>
  </div>
</div>
{% endblock %}

{% block additional_js %}
    <script src="../static/scripts/modal.js"></script>
    <script src="../static/scripts/toggle.js"></script>
{% endblock %}
